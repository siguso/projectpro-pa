<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=0.79"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>ProjectPRO</title>
        <link rel="shortcut icon" href="resources/img/LogoIcon.ico" />
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous"/>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" />
        <link href="resources/css/style_project.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/style_update_user_data.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/style_create_group.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/style_group_user_list.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/style_admin_user.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/style_projects_registration.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/style_projects_information.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/materialize.min.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/jquerywebui-popover.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/font.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css"/>
        <link href="../resources/css/social.css" rel="stylesheet" type="text/css"/>

        <f:event type="preRenderView" listener="#{plantillaController.verificarSesion()}" />
    </h:head>

    <h:body>

        <div id="top">
            <ui:insert name="top">
                <!-- barra de navegación -->
                <header class="header1">
                    <div class="nav1 navbar-fixed">
                        <nav> 
                            <div class="nav-wrapper">
                                <ul class="left">
                                    <a href="#!" class="brand-logo tooltipped" data-position="bottom" data-tooltip="ProjectPRO. Grandes ideas, grandes proyectos"><img src="resources/img/logoWBirrete5.png" alt=""/></a>
                                    <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                                    <a href="#" class="menu waves-effect hide-on-med-and-down" id="menu-toggle"><i class="material-icons">menu</i></a>
                                </ul>                     
                                <div class="search hide-on-med-and-down">
                                    <form id="navbarsearch" class="" method="post">    
                                        <div class="input-field">
                                            <input id="search" type="search" name="search" placeholder="Buscar"/>
                                            <label class="label-icon" for="search"><i class="material-icons">search</i></label>
                                            <i class="material-icons">close</i>
                                        </div>
                                    </form>                    
                                </div>
                                <h:form>
                                    <ul id="nav-mobile" class="right hide-on-med-and-down">
                                        <li class="waves-effect waves-light"><h:commandLink value="Inicio" action="/projects?faces-redirect=true"><i class="material-icons left">home</i></h:commandLink></li>
                                        <!--<li class="waves-effect waves-light"><a href="#"><i class="material-icons left">home</i>Inicio</a></li>-->
                                        <li><a href="#" class="dropdown-trigger2" data-target="grupo"><i class="material-icons left">group</i>Grupo</a></li>
                                        <li><a href="#" class="dropdown-trigger2" data-target="publicacion"><i class="material-icons left">book</i>Publicación</a></li>
                                        <li><a href="#" class="dropdown-trigger2" data-target="usuarios"><i class="material-icons left">account_box</i>Usuarios</a></li>
                                        <li class="user"><a id="login" href="#"><img src="resources/img/user_photo.png" class="circle responsive-img" alt=""/></a></li>  
                                    </ul>
                                    <ul id="grupo" class="dropdown-content">
                                        <li><a href="#grupo_modal" class="modal-trigger"><i class="material-icons left">group_add</i>Crear Grupo</a></li>
                                        <!--<li><h:commandLink value="Crear grupo" action="/create_group?faces-redirect=true"><i class="material-icons left">group_add</i></h:commandLink></li>-->
                                        <li><a href="#!"><i class="material-icons left">contacts</i>Ver Grupo</a></li>
                                    </ul>
                                    <ul id="publicacion" class="dropdown-content">
                                        <li><h:commandLink value="Registrar Proyecto" action="/projects_registration?faces-redirect=true"><i class="material-icons left">description</i></h:commandLink></li>
                                        <!--<li><a href="#!"><i class="material-icons left">description</i>Registrar Proyecto</a></li>-->
                                    </ul>
                                    <ul id="usuarios" class="dropdown-content">
                                        <li><h:commandLink value="Lista de Usuarios" action="/admin_user?faces-redirect=true"><i class="material-icons left">assignment_ind</i></h:commandLink></li>
                                    </ul>
                                </h:form>
                            </div>   
                        </nav>
                    </div>
                </header>
                <!-- fin barra de navegación -->

                <!-- modal crear_grupo -->
                <div id="grupo_modal" class="modal form_grupo">
                    <div class="modal-content">
                        <h:form id="formulario3" class="col s12 m9 l8 offset-l2 offset-m2">
                            <h:inputHidden id="n_autor" />
                            <p:growl />
                            <div class="row">
                                <div class="col s12 m10 l8 offset-l2">
                                    <blockquote>
                                        <h4>CREAR GRUPO DE PROYECTO</h4>
                                        <h6>(*)Dato requerido</h6>
                                    </blockquote>
                                </div>  
                                <div class="input-field col s12 m11 l6 offset-l2">
                                    <i class="material-icons prefix">title</i>
                                    <h:inputText id="name" required="true" value="#{grupoController.grupoEquipo.nombre}" requiredMessage="Nombre es requerido" />
                                    <h:outputLabel for="name" value="Nombre del Grupo(*)"/>
                                </div>
                                <div class="input-field col s12 m11 l6 offset-l2">
                                    <i class="material-icons prefix">account_circle</i>
                                    <p:inputText id="autor1" placeholder="" required="true" readonly="true" requiredMessage="1er autor es requerido" />
                                    <h:inputHidden id="codAutor1" />
                                    <h:outputLabel for="autor1" value="1er Autor(*)"/>
                                </div>
                                <div class="input-field col s12 m11 l2">
                                    <a class="modal-trigger btn waves-effect waves-light" href="#listado_usuario_modal" onclick="javascript:setAutor('1');">AGREGAR</a>
                                </div>
                                <div class="input-field col s12 m11 l6 offset-l2">
                                    <i class="material-icons prefix">account_circle</i>
                                    <p:inputText id="autor2" placeholder="" required="true" readonly="true" requiredMessage="2do autor es requerido" />
                                    <h:inputHidden id="codAutor2" />
                                    <h:outputLabel for="autor2" value="2do Autor(*)"/>
                                </div>
                                <div class="input-field col s12 m11 l2">
                                    <a class="modal-trigger btn waves-effect waves-light" href="#listado_usuario_modal" onclick="javascript:setAutor('2');">AGREGAR</a>
                                </div>
                                <div class="input-field col s12 m11 l6 offset-l2">
                                    <i class="material-icons prefix">account_circle</i>
                                    <p:inputText id="autor3" placeholder="" required="" readonly="true" />
                                    <h:inputHidden id="codAutor3" />
                                    <h:outputLabel for="autor3" value="3er Autor"/>
                                </div>
                                <div class="input-field col s12 m11 l2">
                                    <a class="modal-trigger btn waves-effect waves-light" href="#listado_usuario_modal" onclick="javascript:setAutor('3');">AGREGAR</a>
                                </div>
                                <div class="input-field col s12 m11 l6 offset-l2">
                                    <i class="material-icons prefix">account_circle</i>
                                    <p:inputText id="autor4" placeholder="" required="" readonly="true" />
                                    <h:inputHidden id="codAutor4" />
                                    <h:outputLabel for="autor4" value="4to Autor"/>
                                </div>
                                <div class="input-field col s12 m11 l2">
                                    <a class="modal-trigger btn waves-effect waves-light" href="#listado_usuario_modal" onclick="javascript:setAutor('4');">AGREGAR</a>
                                </div>
                                <div class="input-field col s12 m11 l8 offset-l2">
                                    <h:commandLink value="Crear grupo" styleClass="btn waves-effect waves-light" actionListener="#{grupoController.registrar()}" />
                                </div>                   
                                <div class="input-field col s12 m11 l8 offset-l2">
                                    <h:outputLink value="projects.xhtml" styleClass="btn waves-effect waves-light">Regresar</h:outputLink>
                                </div>           
                            </div>     
                        </h:form>
                    </div>
                </div>
                <!-- fin modal crear_grupo -->

                <!-- modal listado_usuario -->
                <div id="listado_usuario_modal" class="modal">
                    <div class="modal-content">
                        <h:form id="formulario_grup" class="col s12 m9 l8 offset-l2 offset-m2">
                            <p:growl />
                            <div class="row forms">
                                <div class="col s12 m10 l8">
                                    <blockquote>
                                        <h4>LISTA DE USUARIOS</h4>
                                    </blockquote>     
                                </div>  
                                <div class="container col s12 m10 l12">
                                    <table id="users" class="hover AllDataTables responsive-table row-border compact">
                                        <thead>
                                            <tr>
                                                <th>1er Nombre</th>
                                                <th>2do Nombre</th>
                                                <th>1er Apellido</th>
                                                <th>2do Apellido</th>
                                                <th>Email</th>
                                                <th>Agregar</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <c:forEach items="#{usuarioController.usuarios}" var="usu">
                                                <tr>
                                                    <td>#{usu.nom1}</td>
                                                    <td>#{usu.nom2}</td>
                                                    <td>#{usu.apell1}</td>
                                                    <td>#{usu.apell2}</td>
                                                    <td>#{usu.email}</td>
                                                    <td class="center">
                                                        <a class="modal-close" href="#" onclick="javascript:selectUser('#{usu.cod_usuario}', '#{usu.nom1} #{usu.nom2} #{usu.apell1} #{usu.apell2}');">
                                                            <i class="material-icons center">person_add</i>
                                                        </a>
                                                    </td>
                                                </tr>
                                            </c:forEach> 
                                        </tbody>
                                    </table>
                                </div>
                                <div class="input-field col s12 m11 l8 offset-l2">
                                    <a class="modal-close btn waves-effect waves-light" href="#!">REGRESAR</a>
                                </div>           
                            </div>     
                        </h:form>
                    </div>
                </div>
                <!-- fin modal listado_usuario -->

                <!-- login desplegable -->
                <div id="login-form" class="webui-popover-content">
                    <div class="row desplegable">
                        <h:form class="col s12 m12 l12">
                            <div class="input-field center">                        
                                <img src="resources/img/user_photo.png" class="circle responsive-img" alt=""/>                        
                            </div>
                            <!--<div class="input-field center">   
                                <h:outputText class="col offset-l2" value="#{usuarioController.usuario.cod_tpuser}">
                                    <f:converter converterId="tipoUsuarioConverter" />
                                </h:outputText>
                            </div>
                            <br></br>-->
                            <div class="input-field center">
                                <span class="black-text name"><b>#{menuController.mostrarUsuarioLogeado()}</b></span>
                                <br></br>
                                <span class="black-text email">#{menuController.mostrarEmailUsuarioLogeado()}</span>
                            </div>
                            <div class="input-field">
                                <!--<h:commandLink value="ACTUALIZAR DATOS" styleClass="btn waves-effect waves-light" actionListener="#{usuarioController.modificar(usuario)}" action="/update_user_data?faces-redirect=true"  />-->
                                <a class="modal-trigger btn waves-effect waves-light" href="#update_modal" >ACTUALIZAR DATOS</a>
                                <!--<h:commandLink value="ACTUALIZAR DATOS" class="btn" action="/update_user_data?faces-redirect=true" />-->
                            </div>
                            <div class="input-field">
                                <h:commandLink value="CERRAR SESIÓN" styleClass="btn waves-effect waves-light" actionListener="#{menuController.cerrarSesion()}" action="/index?faces-redirect=true"  />
                            </div>  
                        </h:form>
                    </div> 
                </div>
                <!-- fin login desplegable -->

                <!-- modal update_user_data -->
                <div id="update_modal" class="modal">
                    <div class="modal-content">
                        <h:form id="formulario_update_usuario" class="col s12 m9 l8 offset-l2 ">
                            <p:growl />
                            <div class="row col s12 m12 l12">
                                <div class="col s12 m10 l5 offset-l2 pull-m2">
                                    <blockquote>
                                        <h4>ACTUALIZAR DATOS DE USUARIO</h4>
                                        <h6>(*)Dato requerido</h6>
                                    </blockquote>
                                </div>     
                                <div class="input-field col s12 m2 l3 pull-m1">
                                    <div id="profile-container">
                                        <image id="profileImage" src="resources/img/user_photo.png" class="tooltipped responsive-img" data-tooltip="Click para agregar tu foto de perfil"/>
                                    </div>
                                    <input id="imageUpload" type="file" name="profile_photo" placeholder="Photo" accept="image/*" capture=""/>
                                </div>   
                            </div>
                            <div class="row">
                                <div class="input-field col s12 m11 l4 offset-l2">
                                    <i class="material-icons prefix">account_circle</i>
                                    <h:inputText id="name1" required="true" value="#{usuarioController.usuario.nom1}" requiredMessage="1er nombre es requerido" />
                                    <h:outputLabel for="name1" value="1er Nombre(*)"/>
                                </div>
                                <div class="input-field col s12 m11 l4">
                                    <i class="material-icons prefix">account_circle</i>
                                    <h:inputText id="name2" required="" value="#{usuarioController.usuario.nom2}" requiredMessage="" />
                                    <h:outputLabel for="name2" value="2do Nombre"/>
                                </div>
                                <div class="input-field col s12 m11 l4 offset-l2">
                                    <i class="material-icons prefix">account_circle</i>
                                    <h:inputText id="lastname1" required="true" value="#{usuarioController.usuario.apell1}" requiredMessage="1er apellido es requerido" />
                                    <h:outputLabel for="lastname1" value="1er Apellido(*)"/>
                                </div>
                                <div class="input-field col s12 m11 l4">
                                    <i class="material-icons prefix">account_circle</i>
                                    <h:inputText id="lastname2" required="" value="#{usuarioController.usuario.apell2}" requiredMessage="" />
                                    <h:outputLabel for="lastname2" value="2do Apellido"/>
                                </div>
                                <div class="input-field col s12 m11 l4 offset-l2">
                                    <i class="material-icons prefix">email</i>
                                    <h:inputText id="email" required="true" value="#{usuarioController.usuario.email}" requiredMessage="Correo Electronico es requerido" validatorMessage="Correo no valido">
                                        <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                    </h:inputText>
                                    <h:outputLabel for="email" value="Correo Electronico(*)"/>
                                </div>
                                <div class="input-field col s12 m11 l4">
                                    <i class="material-icons prefix">lock</i>
                                    <h:inputSecret id="password" required="true" value="#{usuarioController.usuario.pass}" requiredMessage="Contraseña es requerida"  />
                                    <!--<p:password id="password" required="true" value="password" requiredMessage="Contraseña es requerida" feedback="true" inline="false"
                                            promptLabel="Nivel de Seguridad" weakLabel="Débil" strongLabel="Fuerte" goodLabel="Buena" />-->
                                    <h:outputLabel for="password" value="Contraseña(*)"/>
                                    <span toggle="#password" class="fa fa-fw fa-eye field-icon toggle-password"></span>
                                </div>
                                <div class="input-field col s12 m11 l4 offset-l2">
                                    <i class="material-icons prefix">phone</i>
                                    <h:inputText id="phone" required="true" value="#{usuarioController.usuario.cel}" requiredMessage="Número celular es requerido" />
                                    <h:outputLabel for="phone" value="Número Celular(*)"/>
                                </div>
                                <div class="input-field col s12 m11 l8 offset-l2">
                                    <h:commandLink value="Actualizar datos de usuario" styleClass="btn waves-effect waves-light" actionListener="#{usuarioController.modificar()}" />
                                </div>                   
                                <div class="input-field col s12 m11 l8 offset-l2">
                                    <h:outputLink value="projects.xhtml" styleClass="btn waves-effect waves-light">Regresar</h:outputLink>
                                </div>           
                            </div>     
                        </h:form>
                    </div>
                </div>
                <!-- fin modal update_user_data -->

            </ui:insert>
        </div>

        <div id="content" class="center_content">
            <ui:insert name="content">

            </ui:insert>
        </div>

        <div id="bottom">
            <ui:insert name="bottom">
                <!-- footer -->
                <footer class="page-footer blue-grey darken-3">
                    <div class="container">
                        <div class="row">
                            <div class="col l6 s12">
                                <h5 class="white-text">ProjectPRO</h5>
                                <p class="grey-text text-lighten-4">Grandes ideas, grandes proyectos.</p>
                            </div>
                            <div class="col l4 offset-l2 s12">
                                © ProjectPRO - Grupo PA Sem VI Sec9 2019-1 <br></br>
                            </div>
                        </div>
                    </div>

                    <div class="footer-copyright blue-grey darken-4 valign-wrapper">
                        <div class="container">
                            Crea tu proyecto de negocio a partir de tus ideas y marca la diferencia
                            <br></br>
                            © 2014 Copyright Text
                        </div>
                    </div>
                </footer>
                <!-- fin footer -->
            </ui:insert>
        </div>


        <script src="resources/js/jquery-3.4.1.min.js" type="text/javascript"></script>
        <script src="resources/js/materialize.min.js" type="text/javascript"></script>
        <script src="resources/js/jquerywebui-popover.js" type="text/javascript"></script>
        <script src="resources/js/scripts.js" type="text/javascript"></script>
        <script src="resources/js/cargar_imagen_perfil.js" type="text/javascript"></script>
        <script src="resources/js/jquery.dataTables.min.js" type="text/javascript"></script>
        <script src="resources/js/cargar_usuario.js" type="text/javascript"></script>
        <script src="resources/js/pagination.js" type="text/javascript"></script>

    </h:body>

</html>
